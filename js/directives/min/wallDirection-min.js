directives.directive("wallDirection",function(){return{restrict:"A",link:function(e,n,i,t){function o(e,n){var i=n.width(),t=n.height(),o=e.ceilingHeight*GRID_SIZE,r=new THREE.PerspectiveCamera(40,i/t,1,6e3);r.position.y=800,r.position.z=1500;var a=new THREE.OrbitControls(r,n[0]);a.addEventListener("change",render),a.maxPolarAngle=Math.PI/2-.001,a.minDistance=0,a.maxDistance=4e3;var s=new THREE.Scene,c=new THREE.PlaneGeometry(1e5,1e5),E=new THREE.MeshBasicMaterial({color:14540253,side:THREE.DoubleSide}),d=new THREE.Mesh(c,E);d.rotation.x=Math.PI/2,s.add(d);var l=new THREE.Projector,m=new THREE.Vector3(0,1e4,.5),R=new THREE.AmbientLight(6316128);s.add(R);var w=new THREE.DirectionalLight(16777215);w.position.x=-.3704497358455519,w.position.y=.8303481835923215,w.position.z=-.4162798184117182,w.position.normalize(),s.add(w);var w=new THREE.DirectionalLight(8421504);w.position.x=.4314326373398046,w.position.y=.6372289487054973,w.position.z=.6385962310957584,w.position.normalize(),s.add(w);var H=new THREE.WebGLRenderer;H.setClearColor(15790320),H.setSize(i,t),n.append(H.domElement);var p=e.roomNormalisedLines,e=constructRoom(e,p,thickness,o,function(e,n){return gray}),T=e.parent,h=e.objects,x=(new THREE.Box3).setFromObject(T),v=x.max.x-x.min.x,g=x.max.y-x.min.y,u=x.max.z-x.max.z,z=1;return T.scale.x=z,T.scale.z=z,T.scale.y=z,s.add(T),{controls:a,scene:s,camera:r,renderer:H}}}}});